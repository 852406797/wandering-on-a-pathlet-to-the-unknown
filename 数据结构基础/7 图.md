## 7.2 图的定义

图（Graph）是由顶点的有穷非空集合和顶点之间边的集合组成，通常表示为：G(V,E)，其中，G 表示一个图，V 是图 G 中顶点的集合，E 是图 G 中边的集合。

在图中数据元素，称之为**顶点（Vertex）**。

图中，任意两个顶点之间都可能有关系，顶点之间的逻辑关系用**边**来表示。

若顶点 \( v_i \) 到 \( v_j \) 之间的边没有方向，则称这条边为**无向边（Edge）**，用无序偶对 \( (v_i, v_j) \) 来表示。如果图中任意两个顶点之间的边都是无向边，则称该图为**无向图（Undirected graphs）**。

若顶点 \( v_i \) 到 \( v_j \) 之间的边没有方向，则称这条边为**有向边**，也称为弧（Arc）。如果图中任意两个顶点之间的边都是有向边，则称该图为**有向图（Directed graphs）**。

在图中，若不存在顶点到其自身的边，且同一条边不重复出现，则称这样的图为**简单图**。

在无向图中，如果任意两个顶点都存在边，则称该图为**无向完全图**。

在有向图中，如果任意两个顶点都存在方向互为相反的两条弧，则称该图为**有向完全图**。

有很少条边或弧的图称为**稀疏图**，反之称为**稠密图**。

与图的边或弧相关的数叫做**权（Weight）**。这种带权的图通常称为**网（Network）**。

假设有两个图 \( G=(V,E) \) 和 \( G'=(V',E') \)，如果 \( V' \subseteq V \) 且 \( E' \subseteq E \)，则称 \( G' \) 为 \( G \) 的**子图（Subgraph）**。

对于*无向图* \( G=(V,\{E\}) \)，如果边 \( (v, v') \in E \)，则称顶点 \( v \) 和 \( v' \) 互为**邻接点（Adjacent）**，即 \( v \) 和 \( v' \) 相邻接。边 \( (v,v') \) **依附（incident）** 于顶点 \( v \) 和 \( v' \)，或者说 \( (v,v') \) 与顶点 \( v \) 和 \( v' \) 相关联。顶点 \( v \) 的 **度（Degree）** 是和 \( v \) 相关联的边的数目，记为 \( TD(v) \)。

对于*有向图* \( G=(V,\{E\}) \)，如果弧 \( \langle v, v' \rangle \in E \)，则称顶点 \( v \) **邻接到**顶点 \( v' \)，顶点 \( v' \) **邻接自**顶点 \( v \)。弧 \( \langle v, v' \rangle \) 和顶点 \( v \)，\( v' \) 相关联。以顶点 \( v \) 为头的弧的数目称为 \( v \) 的**入度（InDegree）**，记为 \( ID(v) \)；以 \( v \) 为尾的弧的数目称为 \( v \) 的**出度（OutDegree）**，记为 \( OD(v) \)；顶点 \( v \) 的度为 \( TD(v) = ID(v) + OD(v) \)。

无向图 \( G=(V,\{E\}) \) 中从顶点 \( v \) 到顶点 \( v' \) 的 **路径（Path）** 是一个顶点序列 \( (v=v_{i,0}, v_{i,1},\cdots, v_{i,m}=v') \)，其中 \( (v_{i,j-1}, v_{i,j}) \in E \)，\( 1 \leqslant j \leqslant m \)。

路径的**长度**是路径上的边或弧的数目。

第一个顶点到最后一个顶点相同的路径称为**回路或环（Cycle）**。序列中顶点不重复出现的路径称为**简单路径**。除了第一个顶点和最后一个顶点之外，其余顶点不重复出现的回路，称为**简单回路**或简单环。

在无向图 \( G \) 中，如果从顶点 \( v \) 到顶点 \( v' \) 有路径，则称 \( v \) 和 \( v' \) 是连通的。如果对于图中任意两个顶点 \( v_i \)、\( v_j \)（\( v_i, v_j \in V \)），\( v_i \) 和 \( v_j \) 都是连通的，则称 \( G \) 是**连通图（Connected Graph）**。

无向图中的极大连通子图称为**连通分量**。

在有向图 \( G \) 中，如果对于每一对 \( v_i, v_j \in V \)、\( v_i \neq v_j \)，从 \( v_i \) 到 \( v_j \) 和从 \( v_j \) 到 \( v_i \) 都存在路径，则称 \( G \) 是**强连通图**。有向图中的极大强连通子图称做有向图的**强连通分量**。

一个连通图的**生成树**是一个极小的连通子图，它含有图中全部的 n 个顶点，但只有足以构成一棵树的 n-1 条边。

如果一个有向图恰有一个顶点的入度为 0，其余顶点的入度均为 1，则这是一棵**有向树**。。一个有向图的**生成森林**由若干棵有向树组成，含有图中全部顶点，但只有足以构成若干棵不相交的有向树的弧。

## 7.3 图的抽象数据类型

![ADT](https://cdn.jsdelivr.net/gh/852406797/picgopic@main/202412092012052.png)

## 7.4 图的存储结构

### 7.4.1 邻接矩阵

图的 **邻接矩阵（Adjacency Matrix）** 存储方式是用两个数组来表示图。一个一维数组存储图中顶点信息，一个二维数组（称为邻接矩阵）存储图中的边或弧的信息。

### 7.4.2 邻接表

把数组与链表相结合的存储方法称为**邻接表（Adjacency List）**。

### 7.4.3 十字链表

把邻接表与逆邻接表结合起来——**十字链表（Orthogonal List）**。

### 7.4.4 邻接多重表

其中 ivex 和 jvex 是与某条边依附的两个顶点在顶点表中下标。ilink 指向依附顶点 ivex 的下一条边，jlink 指向依附顶点 jvex 的下一条边。这就是**邻接多重表**结构。

### 7.4.5 边集数组

**边集数组**是由两个一维数组构成。一个是存储顶点的信息；另一个是存储边的信息，这个边数组每个数据元素由一条边的起点下标（begin）、终点下标（end）和权（weight）组成，如图7-4-14所示。

## 7.5 图的遍历

从图中某一顶点出发访遍图中其余顶点，且使每一个顶点仅被访问一次，这一过程就叫做**图的遍历（Traversing Graph）**。

### 7.5.1 深度优先遍历

**深度优先遍历（Depth_First_Search）**，也有称为深度优先搜索，简称为 DFS。

它从图中某个顶点 v 出发，访问此顶点，然后从 v 的未被访问的邻接点出发深度优先遍历图，直至图中所有和 v 有路径相通的顶点都被访问到。（对于非连通图）若图中尚有顶点未被访问，则另选图中一个未曾被访问的顶点作起始点，重复上述过程，直至图中所有顶点都被访问到为止。

### 7.5.2 广度优先遍历

**广度优先遍历（Breadth-First Search）**，又称为广度优先搜索，简称BFS。

## 7.6 最小生成树

把构造连通网的最小代价生成树称为**最小生成树（Minimal Cost Spanning Tree）**。

### 7.6.1 普里姆（Prim）算法

实现定义：

假设 \( N=(P,\{E\}) \) 是连通网, \( TE \) 是 \( N \) 上最小生成树中边的集合。算法从 \( U=\{u_0\} \) (\( u_0 \in V \)), \( TE=\{\} \) 开始。重复执行下述操作：在所有 \( u \in U, v \in V-U \) 的边 \( (u,v) \in E \) 中找一条代价最小的边 \( (u_0,v_0) \) 并入集合 \( TE \)，同时 \( v_0 \) 并入 \( U \)，直至 \( U=V \) 为止。此时 \( TE \) 中必有 \( n-1 \) 条边，则 \( T=(V,\{TE\}) \) 为 \( N \) 的最小生成树。

此算法的时间复杂度为 \( O(n^2) \)。

### 7.6.2 克鲁斯卡尔（Kruskal）算法

实现定义：

假设 \( N=(V,E) \) 是连通网，则令最小生成树的初始状态为只有 \( n \) 个顶点而无边的非连通图 \( T=(V,\{\}) \)，图中每个顶点自成一个连通分量。在 \( E \) 中选择代价最小的边，若该边依附的顶点落在 \( T \) 中不同的连通分量上，则将此边加入到 \( T \) 中，否则舍去此边而选择下一条代价最小的边。依次类推，直至 \( T \) 中所有顶点都在同一连通分量上为止。

此算法的 Find 函数由边数 \( e \) 决定，时间复杂度为 \( O(\log e) \)，而外面有一个 for 循环 \( e \) 次。所以克鲁斯卡尔算法的时间复杂度为 \( O(e \log e) \)。

## 7.7 最短路径

对于网图来说，**最短路径**，是指两顶点之间经过的边上权值之和最少的路径，并且我们称路径上的第一个顶点是源点，最后一个顶点是终点。

### 7.7.1 迪杰斯特拉（Dijkstra）算法

此算法的时间复杂度为\( O(N^2) \)。

### 7.7.2 弗洛伊德（Floyd）算法

\[ D^0[v][w] = \min\{D^{-1}[v][w], D^{-1}[v][0] + D^{-1}[0][w]\} \]

如果面临需要求所有顶点至所有顶点的最短路径问题时，推荐弗洛伊德（Floyd）算法。

## 7.8 拓扑排序

### 7.8.1 拓扑排序介绍

在一个表示工程的有向图中，用顶点表示活动，用弧表示活动之间的优先关系，这样的有向图为顶点表示活动的网，我们称为 **AOV 网（Activity On Vertex Network）**。


设 \( G=(V,E) \) 是一个具有 \( n \) 个顶点的有向图，\( V \) 中的顶点序列 \( v_1, v_2, \ldots, v_n \)，满足若从顶点 \( v_i \) 到 \( v_j \) 有一条路径，则在顶点序列中顶点 \( v_i \) 必在顶点 \( v_j \) 之前。则我们称这样的顶点序列为一个**拓扑序列**。

**拓扑排序**，其实就是对 一个有向图构造拓扑序列的过程。

### 7.8.2 拓扑排序算法

分析整个算法，对一个具有 \( n \) 个顶点 \( e \) 条弧的 AOV 网来说，扫描顶点表，将入度为 0 的顶点入栈的时间复杂度为 \( O(n) \)，而之后的 while 循环中，每个顶点进一次栈，出一次栈，入度减 1 的操作共执行了 \( e \) 次，所以整个算法的时间复杂度为 \( O(n+e) \)。

## 7.9 关键路径

在一个表示工程的带权有向图中，用顶点表示事件，用有向边表示活动，用边上的权值表示活动的持续时间，这种有向图的边表示活动的网，我们称之为 **AOE 网（Activity On Edge Network）**。我们把 AOE 网中没有入边的顶点称为始点或源点，没有出边的顶点称为终点或汇点。

把路径上各个活动所持续的时间之和称为**路径长度**，从源点到汇点具有最大长度的路径叫**关键路径**，在关键路径上的活动叫**关键活动**。

分析整个求关键路径的算法，第 6 行是拓扑排序，时间复杂度为 \( O(n+e) \)，第 8~9 行时间复杂度为 \( O(n) \)，第 \( 10\sim 19 \) 行时间复杂度为 \( O(n+e) \)，第 \( 20\sim 31 \) 行时间复杂也为 \( O(n+e) \)，根据对时间复杂度的定义，所有的常数系数可以忽略，所以最终求关键路径算法的时间复杂度依然是 \( O(n+e) \)。

